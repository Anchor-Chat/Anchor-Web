(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1089:function(t,e,r){(function(e){const n=r(476);t.exports=(async(t,r,o,i)=>{const s={name:r,type:o,accessController:n.join("/ipfs",i)};return(await t.object.put(e.from(JSON.stringify(s)))).toJSON().multihash.toString()})}).call(this,r(417).Buffer)},1090:function(t,e,r){"use strict";const n=r(476),o=r(446);class i{constructor(t,e){this.root=t,this.path=e}toString(){return n.join("/orbitdb",this.root,this.path)}static isValid(t){const e=t.toString().split("/").filter((e,r)=>!((0===r||1===r)&&0===t.toString().indexOf("/orbit")&&"orbitdb"===e)).filter(t=>""!==t&&" "!==t),r=e[0].indexOf("Qm")>-1?o.fromB58String(e[0]):null;try{o.validate(r)}catch(t){return!1}return null!==r}static parse(t){if(!t)throw new Error(`Not a valid OrbitDB address: ${t}`);if(!i.isValid(t))throw new Error(`Not a valid OrbitDB address: ${t}`);const e=t.toString().split("/").filter((e,r)=>!((0===r||1===r)&&0===t.toString().indexOf("/orbit")&&"orbitdb"===e)).filter(t=>""!==t&&" "!==t);return new i(e[0],e.slice(1,e.length).join("/"))}}t.exports=i},1091:function(t,e,r){"use strict";t.exports=class{constructor(){this._access={admin:[],write:[],read:[]}}async load(t){}async save(){}get admin(){return this._access.admin}get write(){return this._access.write.concat(this._access.admin)}get read(){return this._access.read}add(t,e){switch(t){case"admin":this._access.admin.push(e);break;case"write":this._access.write.push(e);break;case"read":this._access.read.push(e)}}remove(t,e){const r=(t,r)=>t.reduce((t,r)=>(r!==e&&t.push(r),t),[]);switch(t){case"admin":this._access.admin=r(this._access.admin);break;case"write":this._access.write=r(this._access.write);break;case"read":this._access.read=r(this._access.read)}}}},1092:function(t,e,r){"use strict";(function(e){const n=r(1091);t.exports=class extends n{constructor(t){super(),this._ipfs=t}async load(t){0===t.indexOf("/ipfs")&&(t=t.split("/")[2]);try{const e=await this._ipfs.object.get(t),r=JSON.parse(e.toJSON().data);this._access=r}catch(t){console.log("ACCESS ERROR:",t)}}async save(){let t;try{const r=JSON.stringify(this._access,null,2);t=(await this._ipfs.object.put(new e(r))).toJSON().multihash.toString()}catch(t){console.log("ACCESS ERROR:",t)}return t}}}).call(this,r(417).Buffer)},1093:function(t,e,r){"use strict";const n=new(0,r(452).ec)("secp256k1");t.exports=((t,e)=>({create:(r="./keystore")=>{return e&&e.sync&&e.sync(r),new class{constructor(t){this._storage=t}createKey(t){const e=n.genKeyPair(),r=e.getPublic("hex"),o=e.getPrivate("hex");return this._storage.setItem(t,JSON.stringify({publicKey:r,privateKey:o})),e}getKey(t){let e=JSON.parse(this._storage.getItem(t));if(e)return n.keyPair({pub:e.publicKey,priv:e.privateKey,privEnc:"hex",pubEnc:"hex"})}generateKey(){return Promise.resolve(n.genKeyPair())}exportPublicKey(t){return Promise.resolve(t.getPublic("hex"))}exportPrivateKey(t){return Promise.resolve(t.getPrivate("hex"))}importPublicKey(t){return Promise.resolve(n.keyFromPublic(t,"hex"))}importPrivateKey(t){return Promise.resolve(n.keyFromPrivate(t,"hex"))}sign(t,e){const r=n.sign(e,t);return Promise.resolve(r.toDER("hex"))}verify(t,e,r){let o=!1;return o=n.verify(r,t,e),Promise.resolve(o)}}(t?new t(r):localStorage)}}))},1094:function(t,e,r){const n=r(1093);t.exports=n()},1095:function(t,e,r){"use strict";const n=r(476),o=r(524),i=o.create("cache",{color:o.Colors.Magenta});o.setLogLevel("ERROR");let s={};t.exports=((t,e)=>({load:async(r,o)=>{i.debug("load, database:",o.toString());const a=n.join(o.root,o.path),c=n.join(r,a);let u=s[c];return u||(e&&e.sync&&e.sync(c),u=new class{constructor(t,e){this.path=e||"./orbitdb",this._storage=t,this._store=null}async open(){return i.debug("open",this.path),this.store?Promise.resolve():new Promise((t,e)=>{const r=this._storage(this.path);r.open(n=>{if(n)return e(n);this._store=r,t()})})}async close(){return i.debug("close",this.path),this._store?new Promise(t=>{this._store.close(e=>{if(e)return reject(e);this._store=null,delete s[this.path],t()})}):Promise.resolve()}async destroy(){return i.debug("destroy",this.path),new Promise((t,e)=>{this._storage.destroy(this.path,r=>{if(r)return e(r);t()})})}async get(t){return this._store||await this.open(),this._store.status&&"open"!==this._store.status?Promise.resolve(null):new Promise((e,r)=>{this._store.get(t,(t,n)=>{if(t&&-1===t.toString().indexOf("NotFoundError: Key not found in database")&&-1===t.toString().indexOf("NotFound"))return r(t);e(n?JSON.parse(n):null)})})}async set(t,e){return this._store||await this.open(),this._store.status&&"open"!==this._store.status?Promise.resolve():new Promise((r,n)=>{this._store.put(t,JSON.stringify(e),t=>{if(t&&-1===t.toString().indexOf("NotFoundError: Key not found in database")&&-1===t.toString().indexOf("NotFound"))return n(t);r()})})}async del(t){return this._store||await this.open(),new Promise((e,r)=>{this._store.del(t,t=>{if(t&&-1===t.toString().indexOf("NotFoundError: Key not found in database")&&-1===t.toString().indexOf("NotFound"))return r(t);e()})})}}(t,c),await u.open(),s[c]=u),u},close:async()=>{i.debug("close all"),await Promise.all(Object.values(s),t=>t.close()),s={}}}))},1096:function(t,e,r){(function(e){t.exports=function(t){return"function"==typeof e._augment&&e.TYPED_ARRAY_SUPPORT?e._augment(t):new e(t)}}).call(this,r(417).Buffer)},1097:function(t,e){t.exports=function(t){return null!==t&&("object"==typeof t||"function"==typeof t)}},1098:function(t,e){var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},1099:function(t,e){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,e){if(!function(t){var e="function"==typeof t&&!(t instanceof RegExp)||"[object Function]"===n.call(t);return e||"undefined"==typeof window||(e=t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt),e}(e))throw new TypeError("iterator must be a function");var o,i,s="string"==typeof t,a=t.length,c=arguments.length>2?arguments[2]:null;if(a===+a)for(o=0;o<a;o++)null===c?e(s?t.charAt(o):t[o],o,t):e.call(c,s?t.charAt(o):t[o],o,t);else for(i in t)r.call(t,i)&&(null===c?e(t[i],i,t):e.call(c,t[i],i,t))}},1100:function(t,e,r){!function(){"use strict";var e,n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=r(1099),s=r(1098),a=!{toString:null}.propertyIsEnumerable("toString"),c=function(){}.propertyIsEnumerable("prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];e=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===o.call(t),l=s(t),h=[];if(!e&&!r&&!l)throw new TypeError("Object.keys called on a non-object");if(l)i(t,function(t){h.push(t)});else{var f,p=c&&r;for(f in t)p&&"prototype"===f||!n.call(t,f)||h.push(f)}if(a){var d=t.constructor,y=d&&d.prototype===t;i(u,function(e){y&&"constructor"===e||!n.call(t,e)||h.push(e)})}return h},t.exports=e}()},1101:function(t,e,r){t.exports=Object.keys||r(1100)},1102:function(t,e,r){var n=r(1101),o=r(1097);t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];if(o(r))for(var i=n(r),s=0;s<i.length;s++){var a=i[s];t[a]=r[a]}}return t}},1103:function(t,e,r){var n=r(417).Buffer;t.exports=function(t){return n.isBuffer(t)||/\[object (.+Array|Array.+)\]/.test(Object.prototype.toString.call(t))}},1104:function(t,e,r){var n=r(463),o=r(763).AbstractIterator,i=r(1031);function s(t,e){e||(e={}),this.options=e,o.call(this,t),this._order=e.reverse?"DESC":"ASC",this._limit=e.limit,this._count=0,this._done=!1;var r=i.lowerBound(e),n=i.upperBound(e);try{this._keyRange=r||n?this.db.makeKeyRange({lower:r,upper:n,excludeLower:i.lowerBoundExclusive(e),excludeUpper:i.upperBoundExclusive(e)}):null}catch(t){this._keyRangeError=!0}this.callback=null}t.exports=s,n.inherits(s,o),s.prototype.createIterator=function(){var t=this;t.iterator=t.db.iterate(function(){t.onItem.apply(t,arguments)},{keyRange:t._keyRange,autoContinue:!1,order:t._order,onError:function(t){console.log("horrible error",t)}})},s.prototype.onItem=function(t,e,r){if(!e&&this.callback)return this.callback(),void(this.callback=!1);var n=!0;this._limit&&this._limit>0&&this._count++>=this._limit&&(n=!1),n&&this.callback(!1,e.key,e.value),e&&e.continue()},s.prototype._next=function(t){return t?this._keyRangeError?t():(this._started||(this.createIterator(),this._started=!0),void(this.callback=t)):new Error("next() requires a callback argument")}},1105:function(t,e,r){(function(e){function r(t){this._db=t,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(t,e){this._checkWritten();var r=this._db._checkKeyValue(t,"key",this._db._isBuffer);if(r)throw r;if(r=this._db._checkKeyValue(e,"value",this._db._isBuffer))throw r;return this._db._isBuffer(t)||(t=String(t)),this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._put?this._put(t,e):this._operations.push({type:"put",key:t,value:e}),this},r.prototype.del=function(t){this._checkWritten();var e=this._db._checkKeyValue(t,"key",this._db._isBuffer);if(e)throw e;return this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._del?this._del(t):this._operations.push({type:"del",key:t}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this,r(154))},1106:function(t,e,r){(function(e){function r(t){this.db=t,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){var r=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return r._ended?t(new Error("cannot call next() after end()")):r._nexting?t(new Error("cannot call next() before previous next() has completed")):(r._nexting=!0,"function"==typeof r._next?r._next(function(){r._nexting=!1,t.apply(null,arguments)}):void e.nextTick(function(){r._nexting=!1,t()}))},r.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=r}).call(this,r(154))},1107:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t}},1108:function(t,e,r){var n,o;
/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */
/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */
!function(i,s,a){"use strict";void 0===(o="function"==typeof(n=function(){var t=function(t){throw t},e=function(){},r={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:t,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},n=function(t,e){for(var n in void 0===e&&"function"==typeof t&&(e=t),"[object Object]"!=Object.prototype.toString.call(t)&&(t={}),r)this[n]=void 0!==t[n]?t[n]:r[n];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,e&&(this.onStoreReady=e);var o="object"==typeof window?window:self,i=this.implementationPreference.filter(function(t){return t in o});this.implementation=i[0],this.idb=o[this.implementation],this.keyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},o={constructor:n,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var t=this.idb.open(this.dbName,this.dbVersion),e=!1;t.onerror=function(t){if(function(t){if("error"in t.target)return"VersionError"==t.target.error.name;if("errorCode"in t.target)return 12==t.target.errorCode;return!1}(t))this.onError(new Error("The version number provided is lower than the existing one."));else{var e;if(t.target.error)e=t.target.error;else{var r="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in t.target&&(r+=" with error code "+t.target.errorCode),e=new Error(r)}this.onError(e)}}.bind(this),t.onsuccess=function(t){if(!e)if(this.db)this.onStoreReady();else if(this.db=t.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var r=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=r.objectStore(this.storeName);var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(t){var r=t.name;if(!r)return e=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(t),this.hasIndex(r)){var o=this.store.index(r),i=this.indexComplies(o,t);i||(e=!0,this.onError(new Error('Cannot modify index "'+r+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),n.splice(n.indexOf(r),1)}else e=!0,this.onError(new Error('Cannot create new index "'+r+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),n.length&&(e=!0,this.onError(new Error('Cannot delete index(es) "'+n.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),e||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),t.onupgradeneeded=function(t){if(this.db=t.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=t.target.transaction.objectStore(this.storeName);else{var r={autoIncrement:this.autoIncrement};null!==this.keyPath&&(r.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,r)}var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(t){var r=t.name;if(r||(e=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(t),this.hasIndex(r)){var o=this.store.index(r),i=this.indexComplies(o,t);i||(this.store.deleteIndex(r),this.store.createIndex(r,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})),n.splice(n.indexOf(r),1)}else this.store.createIndex(r,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})},this),n.length&&n.forEach(function(t){this.store.deleteIndex(t)},this)}.bind(this)},deleteDatabase:function(t,e){if(this.idb.deleteDatabase){this.db.close();var r=this.idb.deleteDatabase(this.dbName);r.onsuccess=t,r.onerror=e}else e(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(r,n,o,i){null!==this.keyPath&&(i=o,o=n,n=r),i||(i=t),o||(o=e);var s,a=!1,c=null,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);return u.oncomplete=function(){var t=a?o:i;t(c)},u.onabort=i,u.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(n),s=u.objectStore(this.storeName).put(n)):s=u.objectStore(this.storeName).put(n,r),s.onsuccess=function(t){a=!0,c=t.target.result},s.onerror=i,u},get:function(r,n,o){o||(o=t),n||(n=e);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){var t=i?n:o;t(s)},a.onabort=o,a.onerror=o;var c=a.objectStore(this.storeName).get(r);return c.onsuccess=function(t){i=!0,s=t.target.result},c.onerror=o,a},remove:function(r,n,o){o||(o=t),n||(n=e);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){var t=i?n:o;t(s)},a.onabort=o,a.onerror=o;var c=a.objectStore(this.storeName).delete(r);return c.onsuccess=function(t){i=!0,s=t.target.result},c.onerror=o,a},batch:function(r,n,o){if(o||(o=t),n||(n=e),"[object Array]"!=Object.prototype.toString.call(r))o(new Error("dataArray argument must be of type Array."));else if(0===r.length)return n(!0);var i=r.length,s=!1,a=!1,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);c.oncomplete=function(){var t=a?n:o;t(a)},c.onabort=o,c.onerror=o;var u=function(){0!==--i||s||(s=!0,a=!0)};return r.forEach(function(t){var e=t.type,r=t.key,n=t.value,i=function(t){c.abort(),s||(s=!0,o(t,e,r))};if("remove"==e){var a=c.objectStore(this.storeName).delete(r);a.onsuccess=u,a.onerror=i}else if("put"==e){var l;null!==this.keyPath?(this._addIdPropertyIfNeeded(n),l=c.objectStore(this.storeName).put(n)):l=c.objectStore(this.storeName).put(n,r),l.onsuccess=u,l.onerror=i}},this),c},putBatch:function(t,e,r){var n=t.map(function(t){return{type:"put",value:t}});return this.batch(n,e,r)},upsertBatch:function(r,n,o,i){"function"==typeof n&&(i=o=n,n={}),i||(i=t),o||(o=e),n||(n={}),"[object Array]"!=Object.prototype.toString.call(r)&&i(new Error("dataArray argument must be of type Array."));var s=n.keyField||this.keyPath,a=r.length,c=!1,u=!1,l=0,h=this.db.transaction([this.storeName],this.consts.READ_WRITE);h.oncomplete=function(){u?o(r):i(!1)},h.onabort=i,h.onerror=i;var f=function(t){var e=r[l++];e[s]=t.target.result,0!==--a||c||(c=!0,u=!0)};return r.forEach(function(t){var e,r=t.key;null!==this.keyPath?(this._addIdPropertyIfNeeded(t),e=h.objectStore(this.storeName).put(t)):e=h.objectStore(this.storeName).put(t,r),e.onsuccess=f,e.onerror=function(t){h.abort(),c||(c=!0,i(t))}},this),h},removeBatch:function(t,e,r){var n=t.map(function(t){return{type:"remove",key:t}});return this.batch(n,e,r)},getBatch:function(r,n,o,i){if(o||(o=t),n||(n=e),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(r))o(new Error("keyArray argument must be of type Array."));else if(0===r.length)return n([]);var s=[],a=r.length,c=!1,u=null,l=this.db.transaction([this.storeName],this.consts.READ_ONLY);l.oncomplete=function(){var t=c?n:o;t(u)},l.onabort=o,l.onerror=o;var h=function(t){t.target.result||"dense"==i?s.push(t.target.result):"sparse"==i&&s.length++,0===--a&&(!0,c=!0,u=s)};return r.forEach(function(t){var e=l.objectStore(this.storeName).get(t);e.onsuccess=h,e.onerror=function(t){!0,u=t,o(t),l.abort()}},this),l},getAll:function(r,n){n||(n=t),r||(r=e);var o=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=o.objectStore(this.storeName);return i.getAll?this._getAllNative(o,i,r,n):this._getAllCursor(o,i,r,n),o},_getAllNative:function(t,e,r,n){var o=!1,i=null;t.oncomplete=function(){var t=o?r:n;t(i)},t.onabort=n,t.onerror=n;var s=e.getAll();s.onsuccess=function(t){o=!0,i=t.target.result},s.onerror=n},_getAllCursor:function(t,e,r,n){var o=[],i=!1,s=null;t.oncomplete=function(){var t=i?r:n;t(s)},t.onabort=n,t.onerror=n;var a=e.openCursor();a.onsuccess=function(t){var e=t.target.result;e?(o.push(e.value),e.continue()):(i=!0,s=o)},a.onError=n},clear:function(r,n){n||(n=t),r||(r=e);var o=!1,i=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){var t=o?r:n;t(i)},s.onabort=n,s.onerror=n;var a=s.objectStore(this.storeName).clear();return a.onsuccess=function(t){o=!0,i=t.target.result},a.onerror=n,s},_addIdPropertyIfNeeded:function(t){void 0===t[this.keyPath]&&(t[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(t){return this.store.indexNames.contains(t)},normalizeIndexData:function(t){t.keyPath=t.keyPath||t.name,t.unique=!!t.unique,t.multiEntry=!!t.multiEntry},indexComplies:function(t,e){var r=["keyPath","unique","multiEntry"].every(function(r){if("multiEntry"==r&&void 0===t[r]&&!1===e[r])return!0;if("keyPath"==r&&"[object Array]"==Object.prototype.toString.call(e[r])){var n=e.keyPath,o=t.keyPath;if("string"==typeof o)return n.toString()==o;if("function"!=typeof o.contains&&"function"!=typeof o.indexOf)return!1;if(o.length!==n.length)return!1;for(var i=0,s=n.length;i<s;i++)if(!(o.contains&&o.contains(n[i])||o.indexOf(-1!==n[i])))return!1;return!0}return e[r]==t[r]});return r},iterate:function(e,r){var n="desc"==(r=s({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:t,limit:1/0,offset:0,allowItemRejection:!1},r||{})).order.toLowerCase()?"PREV":"NEXT";r.filterDuplicates&&(n+="_NO_DUPLICATE");var o=!1,i=this.db.transaction([this.storeName],this.consts[r.writeAccess?"READ_WRITE":"READ_ONLY"]),a=i.objectStore(this.storeName);r.index&&(a=a.index(r.index));var c=0;i.oncomplete=function(){o?r.onEnd?r.onEnd():e(null):r.onError(null)},i.onabort=r.onError,i.onerror=r.onError;var u=a.openCursor(r.keyRange,this.consts[n]);return u.onerror=r.onError,u.onsuccess=function(t){var n=t.target.result;if(n)if(r.offset)n.advance(r.offset),r.offset=0;else{var s=e(n.value,n,i);r.allowItemRejection&&!1===s||c++,r.autoContinue&&(c+r.offset<r.limit?n.continue():o=!0)}else o=!0},i},query:function(t,e){var r=[],n=0;return(e=e||{}).autoContinue=!0,e.writeAccess=!1,e.allowItemRejection=!!e.filter,e.onEnd=function(){t(r,n)},this.iterate(function(t){n++;var o=!e.filter||e.filter(t);return!1!==o&&r.push(t),o},e)},count:function(e,r){var n=(r=s({index:null,keyRange:null},r||{})).onError||t,o=!1,i=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){var t=o?e:n;t(i)},a.onabort=n,a.onerror=n;var c=a.objectStore(this.storeName);r.index&&(c=c.index(r.index));var u=c.count(r.keyRange);return u.onsuccess=function(t){o=!0,i=t.target.result},u.onError=n,a},makeKeyRange:function(t){var e,r=void 0!==t.lower,n=void 0!==t.upper,o=void 0!==t.only;switch(!0){case o:e=this.keyRange.only(t.only);break;case r&&n:e=this.keyRange.bound(t.lower,t.upper,t.excludeLower,t.excludeUpper);break;case r:e=this.keyRange.lowerBound(t.lower,t.excludeLower);break;case n:e=this.keyRange.upperBound(t.upper,t.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return e}},i={};function s(t,e){var r,n;for(r in e)(n=e[r])!==i[r]&&n!==t[r]&&(t[r]=n);return t}return n.prototype=o,n.version=o.version,n})?n.call(e,r,e,t):n)||(t.exports=o)}()},1109:function(t,e,r){(function(e){t.exports=l;var n=r(1108),o=r(763).AbstractLevelDOWN,i=r(463),s=r(1104),a=r(1103),c=r(1102),u=r(1096);function l(t){if(!(this instanceof l))return new l(t);if(!t)throw new Error("constructor requires at least a location argument");this.IDBOptions={},this.location=t}i.inherits(l,o),l.prototype._open=function(t,e){var r=this,o={storeName:this.location,autoIncrement:!1,keyPath:null,onStoreReady:function(){e&&e(null,r.idb)},onError:function(t){e&&e(t)}};c(o,t),this.IDBOptions=o,this.idb=new n(o)},l.prototype._get=function(t,r,n){this.idb.get(t,function(o){if(void 0===o)return n(new Error("NotFound"));var i=!0;return!1===r.asBuffer&&(i=!1),r.raw&&(i=!1),i&&(o=o instanceof Uint8Array?u(o):new e(String(o))),n(null,o,t)},n)},l.prototype._del=function(t,e,r){this.idb.remove(t,r,r)},l.prototype._put=function(t,r,n,o){r instanceof ArrayBuffer&&(r=u(new Uint8Array(r)));var i=this.convertEncoding(t,r,n);e.isBuffer(i.value)&&("function"==typeof r.toArrayBuffer?i.value=new Uint8Array(r.toArrayBuffer()):i.value=new Uint8Array(r)),this.idb.put(i.key,i.value,function(){o()},o)},l.prototype.convertEncoding=function(t,e,r){if(r.raw)return{key:t,value:e};if(e){var n=e.toString();"NaN"===n&&(e="NaN")}var o=r.valueEncoding,i={key:t,value:e};return!e||o&&"binary"===o||"object"!=typeof i.value&&(i.value=n),i},l.prototype.iterator=function(t){return"object"!=typeof t&&(t={}),new s(this.idb,t)},l.prototype._batch=function(t,e,r){var n,o,i,s,a=[];if(0===t.length)return setTimeout(r,0);for(n=0;n<t.length;n++){i={},s=t[n],a[n]=i;var c=this.convertEncoding(s.key,s.value,e);for(o in s.key=c.key,s.value=c.value,s)"type"===o&&"del"==s[o]?i[o]="remove":i[o]=s[o]}return this.idb.batch(a,function(){r()},r)},l.prototype._close=function(t){this.idb.db.close(),t()},l.prototype._approximateSize=function(t,e,r){var n=new Error("Not implemented");if(r)return r(n);throw n},l.prototype._isBuffer=function(t){return e.isBuffer(t)},l.destroy=function(t,e){if("object"==typeof t)var r=t.IDBOptions.storePrefix||"IDBWrapper-",n=t.location;else r="IDBWrapper-",n=t;var o=indexedDB.deleteDatabase(r+n);o.onsuccess=function(){e()},o.onerror=function(t){e(t)}};l.prototype._checkKeyValue=function(t,e){return null===t||void 0===t?new Error(e+" cannot be `null` or `undefined`"):null===t||void 0===t?new Error(e+" cannot be `null` or `undefined`"):a(t)&&0===t.byteLength?new Error(e+" cannot be an empty ArrayBuffer"):""===String(t)?new Error(e+" cannot be an empty String"):0===t.length?new Error(e+" cannot be an empty Array"):void 0}}).call(this,r(417).Buffer)},1110:function(t,e,r){const n=r(1109),o=r(1095);t.exports=o(n)},1111:function(t,e,r){"use strict";const n=r(421),o=r(419).Buffer,i=new(r(428));t.exports={handler:function(t,e){e.getPeerInfo((t,r)=>{if(t)return void console.log(t);const s=r.id.toB58String();n(e,n.map(t=>{let e;try{e=JSON.parse(t.toString())}catch(t){return void i.emit("warning",t.message)}if(s!==e.from)return void i.emit("warning","no peerid match "+e.from);const r=e.topicIDs;if(Array.isArray(r))return e.data=o.from(e.data,"hex"),e.seqno=o.from(e.seqno,"hex"),r.forEach(t=>{i.emit(t,e)}),e;i.emit("warning","no topic IDs")}),n.onEnd(()=>{}))})},emitter:i}},1112:function(t,e,r){"use strict";t.exports=(t=>(t.id&&"function"==typeof t.id.toB58String&&(t=t.id),t.toB58String()))},1113:function(t,e,r){"use strict";const n=r(428),o=r(421),i=r(457),s=r(765),a=r(764),c=r(1112);t.exports=class extends n{constructor(t,e,r){super(),this._id=t,this._ipfs=e,this._room=r,this._connection=null,this._connecting=!1}push(t){this._connection?this._connection.push(a(t)):(this.once("connect",()=>this.push(t)),this._connecting||this._getConnection())}stop(){this._connection&&this._connection.end()}_getConnection(){this._connecting=!0,this._getPeerAddresses(this._id,(t,e)=>{t?this.emit("error",t):e.length?this._ipfs._libp2pNode.dialProtocol(e[0],s,(t,e)=>{if(t)return void this.emit("disconnect");this._connecting=!1;const r=i();this._connection=r,o(r,e,o.onEnd(()=>{delete this._connection,this.emit("disconnect")})),this.emit("connect",r)}):this.emit("disconnect")})}_getPeerAddresses(t,e){this._ipfs.swarm.peers((r,n)=>{r?e(r):e(null,n.filter(e=>c(e.peer)===t).map(t=>t.peer))})}}},1114:function(t,e,r){(function(e){var r="Expected a function",n="__lodash_hash_undefined__",o=1/0,i=9007199254740991,s="[object Arguments]",a="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,f=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,b="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,g=b||v||Function("return this")();function m(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var w,x=Array.prototype,E=Function.prototype,j=Object.prototype,O=g["__core-js_shared__"],k=(w=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",S=E.toString,P=j.hasOwnProperty,N=j.toString,I=RegExp("^"+S.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=g.Symbol,B=j.propertyIsEnumerable,D=x.splice,R=A?A.isConcatSpreadable:void 0,C=Math.max,T=G(g,"Map"),$=G(Object,"create"),L=A?A.prototype:void 0,q=L?L.toString:void 0;function K(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function M(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function V(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function F(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function J(t,e){for(var r=0,n=(e=Q(e,t)?[e]:W(e)).length;null!=t&&r<n;)t=t[et(e[r++])];return r&&r==n?t:void 0}function U(t){return!(!ut(t)||k&&k in t)&&(ct(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?I:y).test(function(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function W(t){return at(t)?t:tt(t)}function z(t,e){if(t!==e){var r=void 0!==t,n=null===t,o=t==t,i=ht(t),s=void 0!==e,a=null===e,c=e==e,u=ht(e);if(!a&&!u&&!i&&t>e||i&&s&&c&&!a&&!u||n&&s&&c||!r&&c||!o)return 1;if(!n&&!i&&!u&&t<e||u&&r&&o&&!n&&!i||a&&r&&o||!s&&o||!c)return-1}return 0}function Y(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function G(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return U(r)?r:void 0}function X(t){return at(t)||function(t){return function(t){return lt(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!ct(t)}(t)}(t)&&P.call(t,"callee")&&(!B.call(t,"callee")||N.call(t)==s)}(t)||!!(R&&t&&t[R])}function H(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||_.test(t))&&t>-1&&t%1==0&&t<e}function Q(t,e){if(at(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ht(t))||(h.test(t)||!l.test(t)||null!=e&&t in Object(e))}function Z(t,e){return 1==e.length?t:J(t,function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(e,0,-1))}K.prototype.clear=function(){this.__data__=$?$(null):{}},K.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},K.prototype.get=function(t){var e=this.__data__;if($){var r=e[t];return r===n?void 0:r}return P.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return $?void 0!==e[t]:P.call(e,t)},K.prototype.set=function(t,e){return this.__data__[t]=$&&void 0===e?n:e,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(t){var e=this.__data__,r=F(e,t);return!(r<0||(r==e.length-1?e.pop():D.call(e,r,1),0))},M.prototype.get=function(t){var e=this.__data__,r=F(e,t);return r<0?void 0:e[r][1]},M.prototype.has=function(t){return F(this.__data__,t)>-1},M.prototype.set=function(t,e){var r=this.__data__,n=F(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},V.prototype.clear=function(){this.__data__={hash:new K,map:new(T||M),string:new K}},V.prototype.delete=function(t){return Y(this,t).delete(t)},V.prototype.get=function(t){return Y(this,t).get(t)},V.prototype.has=function(t){return Y(this,t).has(t)},V.prototype.set=function(t,e){return Y(this,t).set(t,e),this};var tt=st(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(ht(t))return q?q.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}(e);var r=[];return f.test(t)&&r.push(""),t.replace(p,function(t,e,n,o){r.push(n?o.replace(d,"$1"):e||t)}),r});function et(t){if("string"==typeof t||ht(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}function rt(t){var e=t?t.length:0;return e?t[e-1]:void 0}var nt,ot,it=(nt=function(t,e){e=function t(e,r,n,o,i){var s=-1,a=e.length;for(n||(n=X),i||(i=[]);++s<a;){var c=e[s];r>0&&n(c)?r>1?t(c,r-1,n,o,i):m(i,c):o||(i[i.length]=c)}return i}(e,1);var r=t?t.length:0,n=function(t,e){for(var r=-1,n=null==t,o=e.length,i=Array(o);++r<o;)i[r]=n?void 0:ft(t,e[r]);return i}(t,e);return function(t,e){for(var r=t?e.length:0,n=r-1;r--;){var o=e[r];if(r==n||o!==i){var i=o;if(H(o))D.call(t,o,1);else if(Q(o,t))delete t[et(o)];else{var s=W(o),a=Z(t,s);null!=a&&delete a[et(rt(s))]}}}}(t,function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(t){return H(t,r)?+t:t}).sort(z)),n},ot=C(void 0===ot?nt.length-1:ot,0),function(){for(var t=arguments,e=-1,r=C(t.length-ot,0),n=Array(r);++e<r;)n[e]=t[ot+e];e=-1;for(var o=Array(ot+1);++e<ot;)o[e]=t[e];return o[ot]=n,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(nt,this,o)});function st(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s),s};return n.cache=new(st.Cache||V),n}st.Cache=V;var at=Array.isArray;function ct(t){var e=ut(t)?N.call(t):"";return e==a||e==c}function ut(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function lt(t){return!!t&&"object"==typeof t}function ht(t){return"symbol"==typeof t||lt(t)&&N.call(t)==u}function ft(t,e,r){var n=null==t?void 0:J(t,e);return void 0===n?r:n}t.exports=it}).call(this,r(33))},1115:function(t,e,r){"use strict";const n=r(766),o=r(422)("hyperdiff"),i=r(1114),s=t=>-1!==t;function a(t,e,r){return t.indexOf(e)}function c(t,e,r){return t.findIndex(function(t){return function(t,e,r){return r.every(r=>e[r]===t[r])}(t,e,r)})}t.exports=function(t,e,r){const{first:u,second:l}=function(t,e){return{first:t,second:n(e)}}(t,e),h=function(t){return t?c:a}(r);o("preconditions first=%j second=%j findIndex=%s",u,l,h.name);const f=u.reduce(function(t,e,n){const a=h(l,e,r),c=s(a)?"common":"removed";return t[c].push(e),i(l,a),o("index=%s value=%s collection=%s",n,e,c),t},{common:[],removed:[]});return f.added=l,o("added=%j removed=%j common%j",f.added,f.removed,f.common),f}},1116:function(t,e,r){"use strict";const n=r(1115),o=r(428),i=r(155),s=r(766),a=r(419).Buffer,c=r(765),u=r(1113),l=r(764),h=r(1111),f={pollInterval:1e3};t.exports=((t,e,r)=>new class extends o{constructor(t,e,r){if(super(),this._ipfs=t,this._topic=e,this._options=Object.assign({},s(f),s(r)),this._peers=[],this._connections={},this._handleDirectMessage=this._handleDirectMessage.bind(this),!this._ipfs.pubsub)throw new Error("This IPFS node does not have pubsub.");this._ipfs.isOnline()?this._start():this._ipfs.on("ready",this._start.bind(this)),this._ipfs.on("stop",this.leave.bind(this))}getPeers(){return this._peers.slice(0)}hasPeer(t){return this._peers.indexOf(t)>=0}leave(){i.clearInterval(this._interval),Object.keys(this._connections).forEach(t=>{this._connections[t].stop()}),h.emitter.removeListener(this._topic,this._handleDirectMessage),this.emit("stop")}broadcast(t){let e=l(t);this._ipfs.pubsub.publish(this._topic,e,t=>{t&&this.emit("error",t)})}sendTo(t,e){let r=this._connections[t];r||((r=new u(t,this._ipfs,this)).on("error",t=>this.emit("error",t)),this._connections[t]=r,r.once("disconnect",()=>{delete this._connections[t],this._peers=this._peers.filter(e=>e!==t),this.emit("peer left",t)}));const n=a.from([0]),o={to:t,from:this._ipfs._peerInfo.id.toB58String(),data:a.from(e).toString("hex"),seqno:n.toString("hex"),topicIDs:[this._topic],topicCIDs:[this._topic]};r.push(a.from(JSON.stringify(o)))}_start(){this._interval=i.setInterval(this._pollPeers.bind(this),this._options.pollInterval);const t=this._onMessage.bind(this);this._ipfs.pubsub.subscribe(this._topic,t,t=>{t?this.emit("error",t):this.emit("subscribed",this._topic)}),this.once("stop",()=>{this._ipfs.pubsub.unsubscribe(this._topic,t)}),this._ipfs._libp2pNode.handle(c,h.handler),h.emitter.on(this._topic,this._handleDirectMessage)}_pollPeers(){this._ipfs.pubsub.peers(this._topic,(t,e)=>{if(t)return void this.emit("error",t);const r=e.sort();this._emitChanges(r)&&(this._peers=r)})}_emitChanges(t){const e=n(this._peers,t);return e.added.forEach(t=>this.emit("peer joined",t)),e.removed.forEach(t=>this.emit("peer left",t)),e.added.length>0||e.removed.length>0}_onMessage(t){this.emit("message",t)}_handleDirectMessage(t){if(t.to===this._ipfs._peerInfo.id.toB58String()){const e=Object.assign({},t);delete e.to,this.emit("message",e)}}}(t,e,r))},1117:function(t,e,r){"use strict";(function(e){const n=r(1116),o=r(524),i=o.create("orbit-db.ipfs-pubsub");o.setLogLevel("ERROR");const s=256;let a=0;t.exports=class{constructor(t,e){this._ipfs=t,this._id=e,this._subscriptions={},null===this._ipfs.pubsub&&i.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(s)}subscribe(t,e,r){if(!this._subscriptions[t]){const o=n(this._ipfs,t);o.on("error",t=>{i.error("Pubsub Error:",t)}),o.on("message",t=>{this._handleMessage(t)}),o.on("peer joined",e=>{i.debug("Peer connected:",t,t===o._topic),this._subscriptions[t]?this._subscriptions[t].onNewPeer(t,e,o):(i.warn("Peer joined a room we don't have a subscription for"),i.warn(e,o._topic,t))}),o.on("subscribed",()=>{this._subscriptions[t]={room:o,onMessage:e,onNewPeer:r},a++,i.debug("Topics open:",a)})}}unsubscribe(t){this._subscriptions[t]&&(this._subscriptions[t].room.leave(),this._subscriptions[t].room=null,delete this._subscriptions[t],i.debug(`Unsubscribed from '${t}'`),a--,i.debug("Topics open:",a))}publish(t,r){this._subscriptions[t]&&this._subscriptions[t].room&&this._ipfs.pubsub&&this._subscriptions[t].room.broadcast(e.from(JSON.stringify(r)))}disconnect(){Object.keys(this._subscriptions).forEach(t=>this.unsubscribe(t)),this._subscriptions={}}_handleMessage(t){if(t.from===this._id)return;let e,r,n;try{n=t.topicIDs[0],e=JSON.parse(t.data),r=this._subscriptions[n]}catch(e){i.error(e),i.error("Couldn't parse pubsub message:",t)}r&&r.onMessage&&e&&r.onMessage(n,e)}}}).call(this,r(417).Buffer)},1118:function(t,e,r){t.exports=r(1117)},1119:function(t,e,r){"use strict";t.exports=((t,e,r)=>new Promise((n,o)=>{const i=(r=Object.assign({concurrency:1/0},r)).concurrency;if(i<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const s=[],a=t[Symbol.iterator]();let c=!1,u=!1,l=0,h=0;const f=()=>{if(c)return;const t=a.next(),r=h;if(h++,t.done)return u=!0,void(0===l&&n(s));l++,Promise.resolve(t.value).then(t=>e(t,r)).then(t=>{s[r]=t,l--,f()},t=>{c=!0,o(t)})};for(let t=0;t<i&&(f(),!u);t++);}))},1120:function(t,e,r){"use strict";t.exports=class{constructor(){this._index={}}get(t){return this._index[t]}updateIndex(t,e){t.values.slice().reverse().reduce((t,r,n)=>(!0!==t[r.payload.key]&&(t[r.payload.key]=!0,"PUT"===r.payload.op?this._index[r.payload.key]=r.payload.value:"DEL"===r.payload.op&&delete this._index[r.payload.key]),e&&e(r,n),t),{})}}},1121:function(t,e,r){"use strict";const n=r(414),o=r(1120),i=r(1119),s=(r(462),(t,e,r)=>t.toString().split(e).join(r));t.exports=class extends n{constructor(t,e,r,n){n||(n={}),n.indexBy||Object.assign(n,{indexBy:"_id"}),n.Index||Object.assign(n,{Index:o}),super(t,e,r,n),this._type="docstore"}get(t,e=!1){const r=(t=t.toString()).split(" ");return t=r.length>1?s(t,"."," ").toLowerCase():t.toLowerCase(),Object.keys(this._index._index).filter(n=>e?-1!==n.indexOf(t):(e=>r.length>1?-1!==s(e,"."," ").toLowerCase().indexOf(t):-1!==e.toLowerCase().indexOf(t))(n)).map(t=>this._index.get(t))}query(t){return Object.keys(this._index._index).map(t=>this._index.get(t)).filter(e=>t(e))}batchPut(t,e){return i(t,(r,n)=>this._addOperationBatch({op:"PUT",key:r[this.options.indexBy],value:r},!0,n===t.length-1,e),{concurrency:1}).then(()=>this.saveSnapshot())}put(t){if(!t[this.options.indexBy])throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUT",key:t[this.options.indexBy],value:t})}del(t){if(!this._index.get(t))throw new Error(`No entry with key '${t}' in the database`);return this._addOperation({op:"DEL",key:t,value:null})}}},1122:function(t,e,r){"use strict";e.deepEqual=((t,e)=>{const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertyNames(e);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++){const o=r[n];if(t[o]!==e[o])return!1}return!0});class n{constructor(t,e,r){this.value=t,this.added=new Set(e),this.removed=new Set(r)}static create(t,e,r){return new n(t,e,r)}static from(t){return n.create(t.value,t.added,t.removed)}}e.OperationTuple3=n},1123:function(t,e,r){"use strict";const n=r(767);t.exports=class{constructor(t){this._index=new n(t)}get(){return this._index}updateIndex(t){if(this._index){const e=t=>n.from(t.payload.value),r=t=>this._index.merge(t);t.values.filter(t=>t&&"COUNTER"===t.payload.op).map(e).forEach(r)}}}},1124:function(t,e,r){"use strict";const n=r(414),o=r(1123),i=r(767);t.exports=class extends n{constructor(t,e,r,n={}){n.Index||Object.assign(n,{Index:o}),super(t,e,r,n),this._type="counter"}get value(){return this._index.get().value}inc(t){const e=new i(this.id,Object.assign({},this._index.get()._counters));return e.increment(t),this._addOperation({op:"COUNTER",key:null,value:e.toJSON()})}}},1125:function(t,e,r){"use strict";t.exports=class{constructor(){this._index={}}get(t){return this._index[t]}updateIndex(t){t.values.slice().reverse().reduce((t,e)=>(t.includes(e.payload.key)||(t.push(e.payload.key),"PUT"===e.payload.op?this._index[e.payload.key]=e.payload.value:"DEL"===e.payload.op&&delete this._index[e.payload.key]),t),[])}}},1126:function(t,e,r){"use strict";const n=r(414),o=r(1125);t.exports=class extends n{constructor(t,e,r,n){let i=Object.assign({},{Index:o});Object.assign(i,n),super(t,e,r,i),this._type="keyvalue"}get(t){return this._index.get(t)}set(t,e){return this.put(t,e)}put(t,e){return this._addOperation({op:"PUT",key:t,value:e})}del(t){return this._addOperation({op:"DEL",key:t,value:null})}}},1127:function(t,e,r){"use strict";t.exports=class{constructor(){this._index={}}get(){return Object.keys(this._index).map(t=>this._index[t])}updateIndex(t){this._index={},t.values.reduce((t,e)=>(t.includes(e.hash)||(t.push(e.hash),"ADD"===e.payload.op?this._index[e.hash]=e:"DEL"===e.payload.op&&delete this._index[e.payload.value]),t),[])}}},1128:function(t,e,r){"use strict";const n=r(772),o=r(1127);t.exports=class extends n{constructor(t,e,r,n){n||(n={}),n.Index||Object.assign(n,{Index:o}),super(t,e,r,n),this._type="feed"}remove(t){return this.del(t)}del(t){const e={op:"DEL",key:null,value:t};return this._addOperation(e)}}},1129:function(t,e,r){"use strict";t.exports=class{constructor(){this._index=null}get(){return this._index?this._index.values:[]}updateIndex(t){this._index=t}}},415:function(t,e,r){"use strict";const n=r(476),o=r(772),i=r(1128),s=r(1126),a=r(1124),c=r(1121),u=r(1118),l=r(1110),h=r(1094),f=r(1092),p=r(1090),d=r(1089),y=r(524),_=y.create("orbit-db");y.setLogLevel("NONE");let b={counter:a,eventlog:o,feed:i,docstore:c,keyvalue:s};class v{constructor(t,e,r={}){this._ipfs=t,this.id=r.peerId||(this._ipfs._peerInfo?this._ipfs._peerInfo.id._idB58String:"default"),this._pubsub=r&&r.broker?new r.broker(this._ipfs):new u(this._ipfs,this.id),this.stores={},this.directory=e||"./orbitdb",this.keystore=r.keystore||h.create(n.join(this.directory,this.id,"/keystore")),this.key=this.keystore.getKey(this.id)||this.keystore.createKey(this.id)}async feed(t,e={}){return e=Object.assign({create:!0,type:"feed"},e),this.open(t,e)}async log(t,e){return e=Object.assign({create:!0,type:"eventlog"},e),this.open(t,e)}async eventlog(t,e={}){return this.log(t,e)}async keyvalue(t,e){return e=Object.assign({create:!0,type:"keyvalue"},e),this.open(t,e)}async kvstore(t,e){return this.keyvalue(t,e)}async counter(t,e={}){return e=Object.assign({create:!0,type:"counter"},e),this.open(t,e)}async docs(t,e={}){return e=Object.assign({create:!0,type:"docstore"},e),this.open(t,e)}async docstore(t,e={}){return this.docs(t,e)}async disconnect(){const t=Object.values(this.stores);for(let e of t)await e.close(),delete this.stores[e.address.toString()];this._pubsub&&this._pubsub.disconnect(),this.stores={}}async stop(){await this.disconnect()}async _createStore(t,e,r){const n=b[t];if(!n)throw new Error(`Invalid database type '${t}'`);let o;r.accessControllerAddress&&(o=new f(this._ipfs),await o.load(r.accessControllerAddress));const i=await this._loadCache(this.directory,e),s=Object.assign({replicate:!0},r,{accessController:o,keystore:this.keystore,cache:i}),a=new n(this._ipfs,this.id,e,s);a.events.on("write",this._onWrite.bind(this)),a.events.on("closed",this._onClosed.bind(this));const c=e.toString();return this.stores[c]=a,s.replicate&&this._pubsub&&this._pubsub.subscribe(c,this._onMessage.bind(this),this._onPeerConnected.bind(this)),a}_onWrite(t,e,r){if(!r)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(t,r)}async _onMessage(t,e){const r=this.stores[t];try{_.debug(`Received ${e.length} heads for '${t}':\n`,JSON.stringify(e.map(t=>t.hash),null,2)),await r.sync(e)}catch(t){_.error(t)}}_onPeerConnected(t,e,r){_.debug(`New peer '${e}' connected to '${t}'`);const n=this.stores[t];if(n){let o=n._oplog.heads;o.length>0&&(_.debug(`Send latest heads of '${t}':\n`,JSON.stringify(o.map(t=>t.hash),null,2)),r.sendTo(e,JSON.stringify(o))),n.events.emit("peer",e)}}_onClosed(t){_.debug(`Database '${t}' was closed`),this.stores[t].events.removeAllListeners("closed"),this._pubsub&&this._pubsub.unsubscribe(t),delete this.stores[t]}async create(t,e,r={}){if(_.debug("create()"),!v.isValidType(e))throw new Error(`Invalid database type '${e}'`);const o=r.directory||this.directory;if(_.debug(`Creating database '${t}' as ${e} in '${o}'`),p.isValid(t))throw new Error("Given database name is an address. Please give only the name of the database!");const i=new f(this._ipfs);r&&r.write&&r.write.length>0?r.write.forEach(t=>i.add("write",t)):i.add("write",this.key.getPublic("hex"));const s=await i.save(),a=await d(this._ipfs,t,e,s),c=p.parse(n.join("/orbitdb",a,t));if(await this._loadCache(o,c).then(t=>t?t.get(n.join(c.toString(),"_manifest")):null).then(t=>void 0!==t&&null!==t)&&!r.overwrite)throw new Error(`Database '${c}' already exists!`);return await this._saveDBManifest(o,c),_.debug(`Created database '${c}'`),this.open(c,r)}async open(t,e={}){_.debug("open()"),e=Object.assign({localOnly:!1,create:!1},e),_.debug(`Open database '${t}'`);const r=e.directory||this.directory;if(_.debug(`Look from '${r}'`),!p.isValid(t)){if(e.create){if(e.create&&!e.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${v.databaseTypes.join("|")})`);return _.warn(`Not a valid OrbitDB address '${t}', creating the database`),e.overwrite=!e.overwrite||e.overwrite,this.create(t,e.type,e)}throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.")}const o=p.parse(t),i=await this._loadCache(r,o).then(t=>t?t.get(n.join(o.toString(),"_manifest")):null).then(t=>void 0!==t&&null!==t);if(_.debug((i?"Found":"Didn't find")+` database '${o}'`),e.localOnly&&!i)throw _.error(`Database '${o}' doesn't exist!`),new Error(`Database '${o}' doesn't exist!`);_.debug(`Loading Manifest for '${o}'`);const s=await this._ipfs.object.get(o.root),a=JSON.parse(s.toJSON().data);if(_.debug(`Manifest for '${o}':\n${JSON.stringify(a,null,2)}`),e.type&&a.type!==e.type)throw new Error(`Database '${o}' is type '${a.type}' but was opened as '${e.type}'`);return await this._saveDBManifest(r,o),e=Object.assign({},e,{accessControllerAddress:a.accessController}),this._createStore(a.type,o,e)}async _saveDBManifest(t,e){const r=await this._loadCache(t,e);await r.set(n.join(e.toString(),"_manifest"),e.root),_.debug(`Saved manifest to IPFS as '${e.root}'`)}async _loadCache(t,e){let r;try{r=await l.load(t,e)}catch(t){console.log(t),_.error("Couldn't load Cache:",t)}return r}static get databaseTypes(){return Object.keys(b)}static isValidType(t){return Object.keys(b).includes(t)}static addDatabaseType(t,e){if(b[t])throw new Error(`Type already exists: ${t}`);b[t]=e}static create(){return new Error("Not implemented yet!")}static open(){return new Error("Not implemented yet!")}}t.exports=v},763:function(t,e,r){(function(e,n){var o=r(1107),i=r(1106),s=r(1105);function a(t){if(!arguments.length||void 0===t)throw new Error("constructor requires at least a location argument");if("string"!=typeof t)throw new Error("constructor requires a location string argument");this.location=t}a.prototype.open=function(t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("open() requires a callback argument");if("object"!=typeof t&&(t={}),"function"==typeof this._open)return this._open(t,r);e.nextTick(r)},a.prototype.close=function(t){if("function"!=typeof t)throw new Error("close() requires a callback argument");if("function"==typeof this._close)return this._close(t);e.nextTick(t)},a.prototype.get=function(t,r,n){var o;if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("get() requires a callback argument");return(o=this._checkKeyValue(t,"key",this._isBuffer))?n(o):(this._isBuffer(t)||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._get?this._get(t,r,n):void e.nextTick(function(){n(new Error("NotFound"))}))},a.prototype.put=function(t,r,n,o){var i;if("function"==typeof n&&(o=n),"function"!=typeof o)throw new Error("put() requires a callback argument");return(i=this._checkKeyValue(t,"key",this._isBuffer))?o(i):(i=this._checkKeyValue(r,"value",this._isBuffer))?o(i):(this._isBuffer(t)||(t=String(t)),this._isBuffer(r)||e.browser||(r=String(r)),"object"!=typeof n&&(n={}),"function"==typeof this._put?this._put(t,r,n,o):void e.nextTick(o))},a.prototype.del=function(t,r,n){var o;if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("del() requires a callback argument");return(o=this._checkKeyValue(t,"key",this._isBuffer))?n(o):(this._isBuffer(t)||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._del?this._del(t,r,n):void e.nextTick(n))},a.prototype.batch=function(t,r,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return n(new Error("batch(array) requires an array argument"));"object"!=typeof r&&(r={});for(var o,i,s=0,a=t.length;s<a;s++)if("object"==typeof(o=t[s])){if(i=this._checkKeyValue(o.type,"type",this._isBuffer))return n(i);if(i=this._checkKeyValue(o.key,"key",this._isBuffer))return n(i);if("put"==o.type&&(i=this._checkKeyValue(o.value,"value",this._isBuffer)))return n(i)}if("function"==typeof this._batch)return this._batch(t,r,n);e.nextTick(n)},a.prototype.approximateSize=function(t,r,n){if(null==t||null==r||"function"==typeof t||"function"==typeof r)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof n)throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(t)||(t=String(t)),this._isBuffer(r)||(r=String(r)),"function"==typeof this._approximateSize)return this._approximateSize(t,r,n);e.nextTick(function(){n(null,0)})},a.prototype._setupIteratorOptions=function(t){var e=this;return t=o(t),["start","end","gt","gte","lt","lte"].forEach(function(r){t[r]&&e._isBuffer(t[r])&&0===t[r].length&&delete t[r]}),t.reverse=!!t.reverse,t.reverse&&t.lt&&(t.start=t.lt),t.reverse&&t.lte&&(t.start=t.lte),!t.reverse&&t.gt&&(t.start=t.gt),!t.reverse&&t.gte&&(t.start=t.gte),(t.reverse&&t.lt&&!t.lte||!t.reverse&&t.gt&&!t.gte)&&(t.exclusiveStart=!0),t},a.prototype.iterator=function(t){return"object"!=typeof t&&(t={}),t=this._setupIteratorOptions(t),"function"==typeof this._iterator?this._iterator(t):new i(this)},a.prototype._chainedBatch=function(){return new s(this)},a.prototype._isBuffer=function(t){return n.isBuffer(t)},a.prototype._checkKeyValue=function(t,e){if(null===t||void 0===t)return new Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(t)){if(0===t.length)return new Error(e+" cannot be an empty Buffer")}else if(""===String(t))return new Error(e+" cannot be an empty String")},t.exports.AbstractLevelDOWN=a,t.exports.AbstractIterator=i,t.exports.AbstractChainedBatch=s}).call(this,r(154),r(417).Buffer)},764:function(t,e,r){"use strict";const n=r(419).Buffer;t.exports=(t=>{let e=t;return n.isBuffer(e)||(e=n.from(e)),e})},765:function(t,e,r){"use strict";t.exports="ipfs-pubsub-room/v2"},766:function(t,e,r){(function(t,r){var n=200,o="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Boolean]",c="[object Date]",u="[object Function]",l="[object GeneratorFunction]",h="[object Map]",f="[object Number]",p="[object Object]",d="[object RegExp]",y="[object Set]",_="[object String]",b="[object Symbol]",v="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",E="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",k="[object Uint8ClampedArray]",S="[object Uint16Array]",P="[object Uint32Array]",N=/\w*$/,I=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,B={};B[s]=B["[object Array]"]=B[v]=B[g]=B[a]=B[c]=B[m]=B[w]=B[x]=B[E]=B[j]=B[h]=B[f]=B[p]=B[d]=B[y]=B[_]=B[b]=B[O]=B[k]=B[S]=B[P]=!0,B["[object Error]"]=B[u]=B["[object WeakMap]"]=!1;var D="object"==typeof t&&t&&t.Object===Object&&t,R="object"==typeof self&&self&&self.Object===Object&&self,C=D||R||Function("return this")(),T="object"==typeof e&&e&&!e.nodeType&&e,$=T&&"object"==typeof r&&r&&!r.nodeType&&r,L=$&&$.exports===T;function q(t,e){return t.set(e[0],e[1]),t}function K(t,e){return t.add(e),t}function M(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function V(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function F(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function J(t,e){return function(r){return t(e(r))}}function U(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var W,z=Array.prototype,Y=Function.prototype,G=Object.prototype,X=C["__core-js_shared__"],H=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Q=Y.toString,Z=G.hasOwnProperty,tt=G.toString,et=RegExp("^"+Q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=L?C.Buffer:void 0,nt=C.Symbol,ot=C.Uint8Array,it=J(Object.getPrototypeOf,Object),st=Object.create,at=G.propertyIsEnumerable,ct=z.splice,ut=Object.getOwnPropertySymbols,lt=rt?rt.isBuffer:void 0,ht=J(Object.keys,Object),ft=$t(C,"DataView"),pt=$t(C,"Map"),dt=$t(C,"Promise"),yt=$t(C,"Set"),_t=$t(C,"WeakMap"),bt=$t(Object,"create"),vt=Vt(ft),gt=Vt(pt),mt=Vt(dt),wt=Vt(yt),xt=Vt(_t),Et=nt?nt.prototype:void 0,jt=Et?Et.valueOf:void 0;function Ot(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function St(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Pt(t){this.__data__=new kt(t)}function Nt(t,e){var r=Jt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ut(t)}(t)&&Z.call(t,"callee")&&(!at.call(t,"callee")||tt.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!Z.call(t,i)||o&&("length"==i||Kt(i,n))||r.push(i);return r}function It(t,e,r){var n=t[e];Z.call(t,e)&&Ft(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function At(t,e){for(var r=t.length;r--;)if(Ft(t[r][0],e))return r;return-1}function Bt(t,e,r,n,o,i,I){var A;if(n&&(A=i?n(t,o,i,I):n(t)),void 0!==A)return A;if(!Yt(t))return t;var D=Jt(t);if(D){if(A=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&Z.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,A)}else{var R=qt(t),C=R==u||R==l;if(Wt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(R==p||R==s||C&&!i){if(V(t))return i?t:{};if(A=function(t){return"function"!=typeof t.constructor||Mt(t)?{}:(e=it(t),Yt(e)?st(e):{});var e}(C?{}:t),!e)return function(t,e){return Ct(t,Lt(t),e)}(t,function(t,e){return t&&Ct(e,Gt(e),t)}(A,t))}else{if(!B[R])return i?t:{};A=function(t,e,r,n){var o=t.constructor;switch(e){case v:return Rt(t);case a:case c:return new o(+t);case g:return function(t,e){var r=e?Rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case m:case w:case x:case E:case j:case O:case k:case S:case P:return function(t,e){var r=e?Rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case h:return function(t,e,r){return M(e?r(F(t),!0):F(t),q,new t.constructor)}(t,n,r);case f:case _:return new o(t);case d:return(u=new(s=t).constructor(s.source,N.exec(s))).lastIndex=s.lastIndex,u;case y:return function(t,e,r){return M(e?r(U(t),!0):U(t),K,new t.constructor)}(t,n,r);case b:return i=t,jt?Object(jt.call(i)):{}}var i;var s,u}(t,R,Bt,e)}}I||(I=new Pt);var T=I.get(t);if(T)return T;if(I.set(t,A),!D)var $=r?function(t){return function(t,e,r){var n=e(t);return Jt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Gt,Lt)}(t):Gt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}($||t,function(o,i){$&&(o=t[i=o]),It(A,i,Bt(o,e,r,n,i,t,I))}),A}function Dt(t){return!(!Yt(t)||H&&H in t)&&(zt(t)||V(t)?et:I).test(Vt(t))}function Rt(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Ct(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var s=e[o],a=n?n(r[s],t[s],s,r,t):void 0;It(r,s,void 0===a?t[s]:a)}return r}function Tt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function $t(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Dt(r)?r:void 0}Ot.prototype.clear=function(){this.__data__=bt?bt(null):{}},Ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ot.prototype.get=function(t){var e=this.__data__;if(bt){var r=e[t];return r===o?void 0:r}return Z.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:Z.call(e,t)},Ot.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?o:e,this},kt.prototype.clear=function(){this.__data__=[]},kt.prototype.delete=function(t){var e=this.__data__,r=At(e,t);return!(r<0||(r==e.length-1?e.pop():ct.call(e,r,1),0))},kt.prototype.get=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]},kt.prototype.has=function(t){return At(this.__data__,t)>-1},kt.prototype.set=function(t,e){var r=this.__data__,n=At(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},St.prototype.clear=function(){this.__data__={hash:new Ot,map:new(pt||kt),string:new Ot}},St.prototype.delete=function(t){return Tt(this,t).delete(t)},St.prototype.get=function(t){return Tt(this,t).get(t)},St.prototype.has=function(t){return Tt(this,t).has(t)},St.prototype.set=function(t,e){return Tt(this,t).set(t,e),this},Pt.prototype.clear=function(){this.__data__=new kt},Pt.prototype.delete=function(t){return this.__data__.delete(t)},Pt.prototype.get=function(t){return this.__data__.get(t)},Pt.prototype.has=function(t){return this.__data__.has(t)},Pt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof kt){var o=r.__data__;if(!pt||o.length<n-1)return o.push([t,e]),this;r=this.__data__=new St(o)}return r.set(t,e),this};var Lt=ut?J(ut,Object):function(){return[]},qt=function(t){return tt.call(t)};function Kt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||A.test(t))&&t>-1&&t%1==0&&t<e}function Mt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||G)}function Vt(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ft(t,e){return t===e||t!=t&&e!=e}(ft&&qt(new ft(new ArrayBuffer(1)))!=g||pt&&qt(new pt)!=h||dt&&"[object Promise]"!=qt(dt.resolve())||yt&&qt(new yt)!=y||_t&&"[object WeakMap]"!=qt(new _t))&&(qt=function(t){var e=tt.call(t),r=e==p?t.constructor:void 0,n=r?Vt(r):void 0;if(n)switch(n){case vt:return g;case gt:return h;case mt:return"[object Promise]";case wt:return y;case xt:return"[object WeakMap]"}return e});var Jt=Array.isArray;function Ut(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!zt(t)}var Wt=lt||function(){return!1};function zt(t){var e=Yt(t)?tt.call(t):"";return e==u||e==l}function Yt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Gt(t){return Ut(t)?Nt(t):function(t){if(!Mt(t))return ht(t);var e=[];for(var r in Object(t))Z.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}r.exports=function(t){return Bt(t,!0,!0)}}).call(this,r(33),r(156)(t))},767:function(t,e,r){"use strict";const{deepEqual:n}=r(1122),o=(t,e)=>t+e;class i{constructor(t,e){this.id=t,this._counters=e||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(o,0)}increment(t){t&&t<1||(void 0!==t&&null!==t||(t=1),this._counters[this.id]=this._counters[this.id]+t)}merge(t){Object.entries(t._counters).forEach(([t,e])=>{this._counters[t]=Math.max(this._counters[t]||0,e)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(t){return i.isEqual(this,t)}static from(t){return new i(t.id,t.counters)}static isEqual(t,e){return t.id===e.id&&n(t._counters,e._counters)}}t.exports=i},772:function(t,e,r){"use strict";const n=r(414),o=r(1129);t.exports=class extends n{constructor(t,e,r,n={}){void 0===n.Index&&Object.assign(n,{Index:o}),super(t,e,r,n),this._type="eventlog"}add(t){return this._addOperation({op:"ADD",key:null,value:t})}get(t){return this.iterator({gte:t,limit:1}).collect()[0]}iterator(t){const e=this._query(t);let r=0;return{[Symbol.iterator](){return this},next(){let t={value:null,done:!0};return r<e.length&&(t={value:e[r],done:!1},r++),t},collect:()=>e}}_query(t){t||(t={});const e=t.limit?t.limit>-1?t.limit:this._index.get().length:1,r=this._index.get().slice();let n=[];return n=t.gt||t.gte?this._read(r,t.gt?t.gt:t.gte,e,!!t.gte):this._read(r.reverse(),t.lt?t.lt:t.lte,e,t.lte||!t.lt).reverse()}_read(t,e,r,n){const o=t.map(t=>t.hash).indexOf(e);let i=Math.max(o,0);return i+=n?0:1,t.slice(i).slice(0,r)}}}}]);
//# sourceMappingURL=3.bundle.js.map